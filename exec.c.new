#include "holberton.h"

/**
 * fun_exec - this function exec the commands
 *
 * @commands: contain the strings with the commands
 * Return: Nothing
 */
void fun_exec(char **commands)
{
	int new_id;
	struct stat st;
	path *head = NULL, **store_paths = NULL;
	char *validate, *pathstr;

	pathstr = _getenv("PATH");
	store_paths = _extractpath(&head, pathstr);
	if (_strcmp(commands[0], "exit") == 0)
		exit(EXIT_SUCCESS);
	/*create child proccess */
	new_id = fork();
	if (new_id == 0)
	{
		validate = validate_commands(commands, store_paths);
		/*execute process*/
		if (stat(validate, &st) == 0)
			execve(validate, commands, NULL);
		else
		{
			printf("%s: No such file or directory\n", commands[0]);
			/*free(validate);*/
			/*free_list(*store_paths);*/
		}
	}
	else
		wait(NULL);
}
